import{t as B,b as U}from"../chunks/BxepBHLk.js";import{p as M,g as W,k as Z,L as $,M as F,N as ee,t as te,a9 as re,aa as ae,I as oe,G as ne,F as J,q as ie,a6 as G,ab as E,X as d,a8 as c,z as u,u as se,A as l,ac as le,Y as _}from"../chunks/BcVFhOEa.js";import{d as ce,c as ue}from"../chunks/CE1F3jnU.js";import{i as ve,b as fe,p as f}from"../chunks/DSii9DI_.js";import{o as de}from"../chunks/CajmxYk6.js";function H(e){M&&W(e)!==null&&Z(e)}let R=!1;function _e(){R||(R=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function pe(e){var t=ee,r=te;$(null),F(null);try{return e()}finally{$(t),F(r)}}function X(e,t,r,n=r){e.addEventListener(t,()=>pe(r));const a=e.__on_r;a?e.__on_r=()=>{a(),n(!0)}:e.__on_r=()=>n(!0),_e()}const me=Symbol("is custom element"),be=Symbol("is html");function V(e,t,r,n){var a=ge(e);M&&(a[t]=e.getAttribute(t)),a[t]!==(a[t]=r)&&e.setAttribute(t,r)}function ge(e){return e.__attributes??(e.__attributes={[me]:e.nodeName.includes("-"),[be]:e.namespaceURI===re})}function z(e,t,r=t){var n=ae();X(e,"input",a=>{var o=a?e.defaultValue:e.value;if(o=k(e)?T(o):o,r(o),n&&o!==(o=t())){var v=e.selectionStart,i=e.selectionEnd;e.value=o??"",i!==null&&(e.selectionStart=v,e.selectionEnd=Math.min(i,e.value.length))}}),(M&&e.defaultValue!==e.value||oe(t)==null&&e.value)&&r(k(e)?T(e.value):e.value),ne(()=>{var a=t();k(e)&&a===T(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function k(e){var t=e.type;return t==="number"||t==="range"}function T(e){return e===""?null:+e}function Y(e,t,r){if(e.multiple)return we(e,t);for(var n of e.options){var a=p(n);if(ve(a,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function he(e,t){J(()=>{var r=new MutationObserver(()=>{var n=e.__value;Y(e,n)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function ye(e,t,r=t){var n=!0;X(e,"change",a=>{var o=a?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(o),p);else{var i=e.querySelector(o)??e.querySelector("option:not([disabled])");v=i&&p(i)}r(v)}),J(()=>{var a=t();if(Y(e,a,n),n&&a===void 0){var o=e.querySelector(":checked");o!==null&&(a=p(o),r(a))}e.__value=a,n=!1}),he(e)}function we(e,t){for(var r of e.options)r.selected=~t.indexOf(p(r))}function p(e){return"__value"in e?e.__value:e.value}async function xe(e,t,r,n,a){l(t,f(u(t).trim().replace(/\n{2,}/g,`
`)));const o=u(t).split(`
`).map(i=>i.trim());if(l(t,f(o.join(`
`))),localStorage.setItem("allsorts-input",u(t)),localStorage.setItem("allsorts-approach",u(r)),u(r)==="naive"||!n.includes(u(r))){o.sort(),l(a,f(o.join(`
`)));return}l(a,"Sorting...");const v={items:o,tailoring:u(r)};try{const i=await fetch("https://feruca-api.fly.dev/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(!i.ok)throw new Error(`Sorting API request failed: ${i.status}, ${i.statusText}`);const m=await i.json();l(a,f(m.join(`
`)))}catch(i){i instanceof Error?console.error(i.message):console.error(i),l(a,"An error occurred with the sorting API request. Please try again.")}}function Se(e,t,r){l(t,""),l(r,""),localStorage.removeItem("allsorts-input")}var Ae=B('<meta name="description" content="Try sorting text using different approaches—including mixing the Latin and Arabic scripts"> <meta property="og:type" content="website"> <meta property="og:title"> <meta property="og:url" content="https://www.theobeers.com/allsorts/"> <meta property="og:image" content="https://www.theobeers.com/allsorts/og.jpg"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:title">',1),Ie=B('<h1 class="mb-4 text-3xl"></h1> <p class="mb-4 hyphens-auto"><em>Based on <a href="https://github.com/theodore-s-beers/feruca" rel="noreferrer" target="_blank" class="text-blue-800 hover:underline">feruca</a>, a simple but conformant & performant implementation of the <a href="https://www.unicode.org/reports/tr10/" rel="noreferrer" target="_blank" class="text-blue-800 hover:underline">Unicode Collation Algorithm</a>, written in safe Rust with minimal dependencies. Give it a try some time!</em></p> <div class="mb-4 flex flex-col gap-4 md:flex-row"><textarea rows="16" placeholder="Enter items to be sorted here, one per line" class="grow rounded border bg-white p-2"></textarea> <textarea rows="16" readonly="" class="grow rounded border bg-white p-2"></textarea></div> <div class="flex flex-col gap-4 md:flex-row"><div class="flex gap-4"><button class="cursor-pointer rounded bg-blue-700 px-3 py-2 text-white">Sort</button> <button class="cursor-pointer rounded bg-gray-600 px-3 py-2 text-white">Clear</button></div> <div class="flex items-center gap-2"><label for="approach-select">Sorting approach:</label> <select id="approach-select" class="rounded border bg-white p-2"><option>Naïve</option><option selected>UCA default</option><option>Arabic first</option><option>Arabic interleaved</option></select></div> <button class="w-16 cursor-pointer rounded bg-green-800 py-2 text-white md:ml-auto">Copy</button></div>',1);function Ce(e,t){ie(t,!0);let r=E(""),n=E(""),a,o=E("uca");const v=["uca","ArabicScript","ArabicInterleaved"],i="Text Sorting Playground";async function m(){try{await navigator.clipboard.writeText(u(n)),a.focus()}catch(s){s instanceof Error?console.error(s.message):console.error(s)}}de(()=>{l(r,f(localStorage.getItem("allsorts-input")||"")),l(o,f(localStorage.getItem("allsorts-approach")||"uca"))});var q=Ie();ue(s=>{var N=Ae();le.title=i;var O=c(G(N),4);V(O,"content",i);var Q=c(O,8);V(Q,"content",i),U(s,N)});var C=G(q);C.textContent=i;var b=c(C,4),g=d(b);H(g);var h=c(g,2);H(h),fe(h,s=>a=s,()=>a),_(b);var L=c(b,2),y=d(L),P=d(y);P.__click=[xe,r,o,v,n];var D=c(P,2);D.__click=[Se,r,n],_(y);var w=c(y,2),x=c(d(w),2),S=d(x);S.value=(S.__value="naive")==null?"":"naive";var A=c(S);A.value=(A.__value="uca")==null?"":"uca";var I=c(A);I.value=(I.__value="ArabicScript")==null?"":"ArabicScript";var j=c(I);j.value=(j.__value="ArabicInterleaved")==null?"":"ArabicInterleaved",_(x),_(w);var K=c(w,2);K.__click=m,_(L),z(g,()=>u(r),s=>l(r,s)),z(h,()=>u(n),s=>l(n,s)),ye(x,()=>u(o),s=>l(o,s)),U(e,q),se()}ce(["click"]);export{Ce as component};
