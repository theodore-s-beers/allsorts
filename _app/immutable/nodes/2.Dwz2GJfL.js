import{t as F,b as M}from"../chunks/BT4zxb5_.js";import{B as T,k as W,w as X,G as V,I as $,J as Y,e as Z,a6 as ee,O as te,a7 as re,a8 as R,C as ae,a3 as B,a9 as k,T as d,a5 as s,g as u,E as oe,c,aa as ne,V as _}from"../chunks/B2kScIqQ.js";import{d as ie,c as le}from"../chunks/DN05ROWg.js";import{i as se,p as f}from"../chunks/B2uG7jQH.js";import{o as ce}from"../chunks/DzGY9Yss.js";function G(e){T&&W(e)!==null&&X(e)}let J=!1;function ue(){J||(J=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function ve(e){var t=Y,r=Z;V(null),$(null);try{return e()}finally{V(t),$(r)}}function z(e,t,r,o=r){e.addEventListener(t,()=>ve(r));const a=e.__on_r;a?e.__on_r=()=>{a(),o(!0)}:e.__on_r=()=>o(!0),ue()}function N(e,t,r,o){var a=e.__attributes??(e.__attributes={});T&&(a[t]=e.getAttribute(t)),a[t]!==(a[t]=r)&&e.setAttribute(t,r)}function U(e,t,r=t){var o=ee();z(e,"input",a=>{var n=a?e.defaultValue:e.value;if(n=I(e)?E(n):n,r(n),o&&n!==(n=t())){var l=e.selectionStart,i=e.selectionEnd;e.value=n??"",i!==null&&(e.selectionStart=l,e.selectionEnd=Math.min(i,e.value.length))}}),(T&&e.defaultValue!==e.value||te(t)==null&&e.value)&&r(I(e)?E(e.value):e.value),re(()=>{var a=t();I(e)&&a===E(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function I(e){var t=e.type;return t==="number"||t==="range"}function E(e){return e===""?null:+e}function D(e,t,r){if(e.multiple)return _e(e,t);for(var o of e.options){var a=p(o);if(se(a,t)){o.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function fe(e,t){R(()=>{var r=new MutationObserver(()=>{var o=e.__value;D(e,o)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function de(e,t,r=t){var o=!0;z(e,"change",a=>{var n=a?"[selected]":":checked",l;if(e.multiple)l=[].map.call(e.querySelectorAll(n),p);else{var i=e.querySelector(n)??e.querySelector("option:not([disabled])");l=i&&p(i)}r(l)}),R(()=>{var a=t();if(D(e,a,o),o&&a===void 0){var n=e.querySelector(":checked");n!==null&&(a=p(n),r(a))}e.__value=a,o=!1}),fe(e)}function _e(e,t){for(var r of e.options)r.selected=~t.indexOf(p(r))}function p(e){return"__value"in e?e.__value:e.value}async function pe(e,t,r,o,a){c(t,f(u(t).trim().replace(/\n{2,}/g,`
`)));const n=u(t).split(`
`).map(i=>i.trim());if(c(t,f(n.join(`
`))),localStorage.setItem("allsorts-input",u(t)),localStorage.setItem("allsorts-approach",u(r)),u(r)==="naive"||!o.includes(u(r))){n.sort(),c(a,f(n.join(`
`)));return}const l={items:n,tailoring:u(r)};try{const i=await fetch("https://feruca-api.fly.dev/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!i.ok)throw new Error(`Sorting API request failed: ${i.status}, ${i.statusText}`);const m=await i.json();c(a,f(m.join(`
`)))}catch(i){i instanceof Error?console.error(i.message):console.error(i),c(a,"An error occurred with the sorting API request. Please try again.")}}function me(e,t,r){c(t,""),c(r,""),localStorage.removeItem("allsorts-input")}async function be(e,t){try{await navigator.clipboard.writeText(u(t))}catch(r){r instanceof Error?console.error(r.message):console.error(r)}}var ge=F('<meta name="description" content="Try sorting text using different approaches—including mixing the Latin and Arabic scripts"> <meta property="og:type" content="website"> <meta property="og:title"> <meta property="og:url" content="https://www.theobeers.com/allsorts/"> <meta property="og:image" content="https://www.theobeers.com/allsorts/og.jpg"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:title">',1),he=F('<h1 class="mb-4 text-3xl"></h1> <p class="mb-4 hyphens-auto"><em>Based on <a href="https://github.com/theodore-s-beers/feruca" rel="noreferrer" target="_blank" class="text-blue-800 hover:underline">feruca</a>, a simple but conformant & performant implementation of the <a href="https://www.unicode.org/reports/tr10/" rel="noreferrer" target="_blank" class="text-blue-800 hover:underline">Unicode Collation Algorithm</a>, written in safe Rust with minimal dependencies. Give it a try some time!</em></p> <div class="mb-4 flex flex-col gap-4 md:flex-row"><textarea rows="16" placeholder="Enter items to be sorted here, one per line" class="grow rounded border bg-white p-2"></textarea> <textarea rows="16" readonly="" class="grow rounded border bg-white p-2"></textarea></div> <div class="flex flex-col gap-4 md:flex-row"><div class="flex gap-4"><button class="cursor-pointer rounded bg-blue-700 px-3 py-2 text-white">Sort</button> <button class="cursor-pointer rounded bg-gray-600 px-3 py-2 text-white">Clear</button></div> <div class="flex items-center gap-2"><label for="approach-select">Sorting approach:</label> <select id="approach-select" class="rounded border bg-white p-2"><option>Naïve</option><option selected>UCA default</option><option>Arabic first</option><option>Arabic interleaved</option></select></div> <button class="w-16 cursor-pointer rounded bg-green-800 py-2 text-white md:ml-auto">Copy</button></div>',1);function ke(e,t){ae(t,!0);let r=k(""),o=k(""),a=k("uca");const n=["uca","ArabicScript","ArabicInterleaved"],l="Text Sorting Playground";ce(()=>{c(r,f(localStorage.getItem("allsorts-input")||"")),c(a,f(localStorage.getItem("allsorts-approach")||"uca"))});var i=he();le(v=>{var O=ge();ne.title=l;var L=s(B(O),4);N(L,"content",l);var Q=s(L,8);N(Q,"content",l),M(v,O)});var m=B(i);m.textContent=l;var b=s(m,4),g=d(b);G(g);var q=s(g,2);G(q),_(b);var C=s(b,2),h=d(C),P=d(h);P.__click=[pe,r,a,n,o];var H=s(P,2);H.__click=[me,r,o],_(h);var y=s(h,2),w=s(d(y),2),x=d(w);x.value=(x.__value="naive")==null?"":"naive";var S=s(x);S.value=(S.__value="uca")==null?"":"uca";var A=s(S);A.value=(A.__value="ArabicScript")==null?"":"ArabicScript";var j=s(A);j.value=(j.__value="ArabicInterleaved")==null?"":"ArabicInterleaved",_(w),_(y);var K=s(y,2);K.__click=[be,o],_(C),U(g,()=>u(r),v=>c(r,v)),U(q,()=>u(o),v=>c(o,v)),de(w,()=>u(a),v=>c(a,v)),M(e,i),oe()}ie(["click"]);export{ke as component};
