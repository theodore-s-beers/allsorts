import{t as N,b as V}from"../chunks/C_tAWPrL.js";import{F as L,p as $,A as G,k as P,l as T,m as R,e as U,a5 as z,M as B,a6 as D,a7 as O,G as H,a4 as c,a2 as K,a8 as h,R as y,g as u,J as Q,c as i,T as x,a9 as W}from"../chunks/BqUl4hIc.js";import{d as X}from"../chunks/CCrIdY5f.js";import{i as Y,p as v}from"../chunks/CfPffSAZ.js";import{o as Z}from"../chunks/Dvm-Lq1E.js";function j(e){L&&$(e)!==null&&G(e)}let C=!1;function ee(){C||(C=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var r;if(!e.defaultPrevented)for(const t of e.target.elements)(r=t.__on_r)==null||r.call(t)})},{capture:!0}))}function te(e){var r=R,t=U;P(null),T(null);try{return e()}finally{P(r),T(t)}}function F(e,r,t,o=t){e.addEventListener(r,()=>te(t));const a=e.__on_r;a?e.__on_r=()=>{a(),o(!0)}:e.__on_r=()=>o(!0),ee()}function M(e,r,t=r){var o=z();F(e,"input",a=>{var n=a?e.defaultValue:e.value;if(n=S(e)?w(n):n,t(n),o&&n!==(n=r())){var s=e.selectionStart,l=e.selectionEnd;e.value=n??"",l!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(l,e.value.length))}}),(L&&e.defaultValue!==e.value||B(r)==null&&e.value)&&t(S(e)?w(e.value):e.value),D(()=>{var a=r();S(e)&&a===w(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function S(e){var r=e.type;return r==="number"||r==="range"}function w(e){return e===""?null:+e}function J(e,r,t){if(e.multiple)return oe(e,r);for(var o of e.options){var a=f(o);if(Y(a,r)){o.selected=!0;return}}(!t||r!==void 0)&&(e.selectedIndex=-1)}function re(e,r){O(()=>{var t=new MutationObserver(()=>{var o=e.__value;J(e,o)});return t.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function ae(e,r,t=r){var o=!0;F(e,"change",a=>{var n=a?"[selected]":":checked",s;if(e.multiple)s=[].map.call(e.querySelectorAll(n),f);else{var l=e.querySelector(n)??e.querySelector("option:not([disabled])");s=l&&f(l)}t(s)}),O(()=>{var a=r();if(J(e,a,o),o&&a===void 0){var n=e.querySelector(":checked");n!==null&&(a=f(n),t(a))}e.__value=a,o=!1}),re(e)}function oe(e,r){for(var t of e.options)t.selected=~r.indexOf(f(t))}function f(e){return"__value"in e?e.__value:e.value}async function ne(e,r,t,o,a){i(r,v(u(r).trim().replace(/\n{2,}/g,`
`)));const n=u(r).split(`
`).map(l=>l.trim());if(i(r,v(n.join(`
`))),localStorage.setItem("allsorts-input",u(r)),localStorage.setItem("allsorts-approach",u(t)),u(t)==="naive"||!o.includes(u(t))){n.sort(),i(a,v(n.join(`
`)));return}const s={items:n,tailoring:u(t)};try{const l=await fetch("https://feruca-api.fly.dev/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!l.ok)throw new Error(`Sorting API request failed: ${l.status}, ${l.statusText}`);const _=await l.json();i(a,v(_.join(`
`)))}catch(l){l instanceof Error?console.error(l.message):console.error(l),i(a,"An error occurred with the sorting API request. Please try again.")}}function le(e,r,t){i(r,""),i(t,"")}var ie=N('<h1 class="mb-6 text-3xl">Text Sorting Playground</h1> <div class="mb-4 flex gap-4"><textarea rows="20" placeholder="Enter items to be sorted here, one per line" class="grow rounded border bg-white p-2"></textarea> <textarea rows="20" readonly="" class="grow rounded border bg-white p-2"></textarea></div> <div class="flex items-center"><button class="mr-4 cursor-pointer rounded bg-blue-700 px-3 py-2 text-white">Sort</button> <button class="mr-4 cursor-pointer rounded bg-gray-600 px-3 py-2 text-white">Clear</button> <div class="mr-2">Sorting approach:</div> <select class="rounded border bg-white p-2"><option>Na√Øve</option><option selected>UCA default</option><option>Arabic first</option><option>Arabic interleaved</option></select> <button class="ml-auto cursor-pointer rounded bg-green-800 px-3 py-2 text-white">Copy</button></div>',1);function de(e,r){H(r,!0);let t=h(""),o=h(""),a=h("uca");const n=["uca","ArabicScript","ArabicInterleaved"];Z(()=>{i(t,v(localStorage.getItem("allsorts-input")||"")),i(a,v(localStorage.getItem("allsorts-approach")||"uca"))});var s=ie(),l=c(K(s),2),_=y(l);j(_);var A=c(_,2);j(A),x(l);var I=c(l,2),k=y(I);k.__click=[ne,t,a,n,o];var q=c(k,2);q.__click=[le,t,o];var p=c(q,4),m=y(p);m.value=(m.__value="naive")==null?"":"naive";var b=c(m);b.value=(b.__value="uca")==null?"":"uca";var g=c(b);g.value=(g.__value="ArabicScript")==null?"":"ArabicScript";var E=c(g);E.value=(E.__value="ArabicInterleaved")==null?"":"ArabicInterleaved",x(p),W(2),x(I),M(_,()=>u(t),d=>i(t,d)),M(A,()=>u(o),d=>i(o,d)),ae(p,()=>u(a),d=>i(a,d)),V(e,s),Q()}X(["click"]);export{de as component};
