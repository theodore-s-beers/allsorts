import{t as F,b as O}from"../chunks/CsXgPhL2.js";import{t as k,g as W,l as X,A as U,B as $,D as Y,x as ee,a0 as te,a1 as re,u as ae,r as oe,e as G,a2 as ne,v as ie,Z as V,a3 as E,M as d,$ as c,V as u,y as se,a4 as l,a5 as le,N as f}from"../chunks/B478JZGx.js";import{d as ce,c as ue}from"../chunks/CwysCz4o.js";import{b as ve}from"../chunks/DHp4q25m.js";import{o as de}from"../chunks/eUrJThgc.js";function B(e){k&&W(e)!==null&&X(e)}let H=!1;function fe(){H||(H=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function _e(e){var t=Y,r=ee;U(null),$(null);try{return e()}finally{U(t),$(r)}}function J(e,t,r,n=r){e.addEventListener(t,()=>_e(r));const a=e.__on_r;a?e.__on_r=()=>{a(),n(!0)}:e.__on_r=()=>n(!0),fe()}const pe=Symbol("is custom element"),me=Symbol("is html");function R(e,t,r,n){var a=ge(e);k&&(a[t]=e.getAttribute(t)),a[t]!==(a[t]=r)&&e.setAttribute(t,r)}function ge(e){return e.__attributes??(e.__attributes={[pe]:e.nodeName.includes("-"),[me]:e.namespaceURI===te})}function D(e,t,r=t){var n=re();J(e,"input",a=>{var o=a?e.defaultValue:e.value;if(o=I(e)?T(o):o,r(o),n&&o!==(o=t())){var v=e.selectionStart,i=e.selectionEnd;e.value=o??"",i!==null&&(e.selectionStart=v,e.selectionEnd=Math.min(i,e.value.length))}}),(k&&e.defaultValue!==e.value||ae(t)==null&&e.value)&&r(I(e)?T(e.value):e.value),oe(()=>{var a=t();I(e)&&a===T(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function I(e){var t=e.type;return t==="number"||t==="range"}function T(e){return e===""?null:+e}function Z(e,t,r){if(e.multiple)return ye(e,t);for(var n of e.options){var a=_(n);if(ne(a,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function be(e,t){G(()=>{var r=new MutationObserver(()=>{var n=e.__value;Z(e,n)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function he(e,t,r=t){var n=!0;J(e,"change",a=>{var o=a?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(o),_);else{var i=e.querySelector(o)??e.querySelector("option:not([disabled])");v=i&&_(i)}r(v)}),G(()=>{var a=t();if(Z(e,a,n),n&&a===void 0){var o=e.querySelector(":checked");o!==null&&(a=_(o),r(a))}e.__value=a,n=!1}),be(e)}function ye(e,t){for(var r of e.options)r.selected=~t.indexOf(_(r))}function _(e){return"__value"in e?e.__value:e.value}async function xe(e,t,r,n,a){l(t,u(t).trim().replace(/\n{2,}/g,`
`),!0);const o=u(t).split(`
`).map(i=>i.trim());if(l(t,o.join(`
`),!0),localStorage.setItem("allsorts-input",u(t)),localStorage.setItem("allsorts-approach",u(r)),u(r)==="naive"||!n.includes(u(r))){o.sort(),l(a,o.join(`
`),!0);return}l(a,"Sorting...");const v={items:o,tailoring:u(r)};try{const i=await fetch("https://feruca-api.fly.dev/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(!i.ok)throw new Error(`Sorting API request failed: ${i.status}, ${i.statusText}`);const p=await i.json();l(a,p.join(`
`),!0)}catch(i){i instanceof Error?console.error(i.message):console.error(i),l(a,"An error occurred with the sorting API request. Please try again.")}}function we(e,t,r){l(t,""),l(r,""),localStorage.removeItem("allsorts-input")}var Se=F('<meta name="description" content="Try sorting text using different approaches—including mixing the Latin and Arabic scripts"> <meta property="og:type" content="website"> <meta property="og:title"> <meta property="og:url" content="https://www.theobeers.com/allsorts/"> <meta property="og:image" content="https://www.theobeers.com/allsorts/og.jpg"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:title">',1),Ae=F('<h1 class="mb-4 text-3xl"></h1> <p class="mb-4 hyphens-auto"><em>Based on <a href="https://github.com/theodore-s-beers/feruca" rel="noreferrer" target="_blank" class="text-blue-800 hover:underline">feruca</a>, a simple but conformant & performant implementation of the <a href="https://www.unicode.org/reports/tr10/" rel="noreferrer" target="_blank" class="text-blue-800 hover:underline">Unicode Collation Algorithm</a>, written in safe Rust with minimal dependencies. Give it a try some time!</em></p> <div class="mb-4 flex flex-col gap-4 md:flex-row"><textarea rows="16" placeholder="Enter items to be sorted here, one per line" class="grow rounded border bg-white p-2"></textarea> <textarea rows="16" readonly="" class="grow rounded border bg-white p-2"></textarea></div> <div class="flex flex-col gap-4 md:flex-row"><div class="flex gap-4"><button class="cursor-pointer rounded bg-blue-700 px-3 py-2 text-white">Sort</button> <button class="cursor-pointer rounded bg-gray-600 px-3 py-2 text-white">Clear</button></div> <div class="flex items-center gap-2"><label for="approach-select">Sorting approach:</label> <select id="approach-select" class="rounded border bg-white p-2"><option>Naïve</option><option selected>UCA default</option><option>Arabic first</option><option>Arabic interleaved</option></select></div> <button class="w-16 cursor-pointer rounded bg-green-800 py-2 text-white md:ml-auto">Copy</button></div>',1);function Me(e,t){ie(t,!0);let r=E(""),n=E(""),a,o=E("uca");const v=["uca","ArabicScript","ArabicInterleaved"],i="Text Sorting Playground";async function p(){try{await navigator.clipboard.writeText(u(n)),a.focus()}catch(s){s instanceof Error?console.error(s.message):console.error(s)}}de(()=>{l(r,localStorage.getItem("allsorts-input")||"",!0),l(o,localStorage.getItem("allsorts-approach")||"uca",!0)});var P=Ae();ue(s=>{var j=Se();le.title="Text Sorting Playground";var N=c(V(j),4);R(N,"content",i);var Q=c(N,8);R(Q,"content",i),O(s,j)});var M=V(P);M.textContent="Text Sorting Playground";var m=c(M,4),g=d(m);B(g);var b=c(g,2);B(b),ve(b,s=>a=s,()=>a),f(m);var C=c(m,2),h=d(C),q=d(h);q.__click=[xe,r,o,v,n];var z=c(q,2);z.__click=[we,r,n],f(h);var y=c(h,2),x=c(d(y),2),w=d(x);w.value=w.__value="naive";var S=c(w);S.value=S.__value="uca";var A=c(S);A.value=A.__value="ArabicScript";var L=c(A);L.value=L.__value="ArabicInterleaved",f(x),f(y);var K=c(y,2);K.__click=p,f(C),D(g,()=>u(r),s=>l(r,s)),D(b,()=>u(n),s=>l(n,s)),he(x,()=>u(o),s=>l(o,s)),O(e,P),se()}ce(["click"]);export{Me as component};
