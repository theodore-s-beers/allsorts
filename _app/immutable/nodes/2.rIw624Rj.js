import{t as U,b as O}from"../chunks/BMHj-ncZ.js";import{B as I,k as H,w as K,G as M,I as V,J as Q,e as W,a6 as X,O as Y,a7 as Z,a8 as F,C as ee,a3 as $,a9 as w,T as x,a5 as c,g as u,E as te,c as l,aa as re,V as S,ab as ae}from"../chunks/Eaz6O1Ki.js";import{d as oe,c as ne}from"../chunks/BUa6Cctz.js";import{i as ie,p as f}from"../chunks/DA_Hlv19.js";import{o as se}from"../chunks/iodoe4VF.js";function B(e){I&&H(e)!==null&&K(e)}let G=!1;function le(){G||(G=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function ce(e){var t=Q,r=W;M(null),V(null);try{return e()}finally{M(t),V(r)}}function R(e,t,r,o=r){e.addEventListener(t,()=>ce(r));const a=e.__on_r;a?e.__on_r=()=>{a(),o(!0)}:e.__on_r=()=>o(!0),le()}function J(e,t,r,o){var a=e.__attributes??(e.__attributes={});I&&(a[t]=e.getAttribute(t)),a[t]!==(a[t]=r)&&e.setAttribute(t,r)}function N(e,t,r=t){var o=X();R(e,"input",a=>{var n=a?e.defaultValue:e.value;if(n=A(e)?k(n):n,r(n),o&&n!==(n=t())){var s=e.selectionStart,i=e.selectionEnd;e.value=n??"",i!==null&&(e.selectionStart=s,e.selectionEnd=Math.min(i,e.value.length))}}),(I&&e.defaultValue!==e.value||Y(t)==null&&e.value)&&r(A(e)?k(e.value):e.value),Z(()=>{var a=t();A(e)&&a===k(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function A(e){var t=e.type;return t==="number"||t==="range"}function k(e){return e===""?null:+e}function z(e,t,r){if(e.multiple)return fe(e,t);for(var o of e.options){var a=d(o);if(ie(a,t)){o.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function ue(e,t){F(()=>{var r=new MutationObserver(()=>{var o=e.__value;z(e,o)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function ve(e,t,r=t){var o=!0;R(e,"change",a=>{var n=a?"[selected]":":checked",s;if(e.multiple)s=[].map.call(e.querySelectorAll(n),d);else{var i=e.querySelector(n)??e.querySelector("option:not([disabled])");s=i&&d(i)}r(s)}),F(()=>{var a=t();if(z(e,a,o),o&&a===void 0){var n=e.querySelector(":checked");n!==null&&(a=d(n),r(a))}e.__value=a,o=!1}),ue(e)}function fe(e,t){for(var r of e.options)r.selected=~t.indexOf(d(r))}function d(e){return"__value"in e?e.__value:e.value}async function de(e,t,r,o,a){l(t,f(u(t).trim().replace(/\n{2,}/g,`
`)));const n=u(t).split(`
`).map(i=>i.trim());if(l(t,f(n.join(`
`))),localStorage.setItem("allsorts-input",u(t)),localStorage.setItem("allsorts-approach",u(r)),u(r)==="naive"||!o.includes(u(r))){n.sort(),l(a,f(n.join(`
`)));return}const s={items:n,tailoring:u(r)};try{const i=await fetch("https://feruca-api.fly.dev/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!i.ok)throw new Error(`Sorting API request failed: ${i.status}, ${i.statusText}`);const _=await i.json();l(a,f(_.join(`
`)))}catch(i){i instanceof Error?console.error(i.message):console.error(i),l(a,"An error occurred with the sorting API request. Please try again.")}}function _e(e,t,r){l(t,""),l(r,"")}var pe=U('<meta name="description" content="Try sorting text using different approaches—including mixing the Latin and Arabic scripts"> <meta property="og:type" content="website"> <meta property="og:title"> <meta property="og:url" content="https://www.theobeers.com/allsorts/"> <meta property="og:image" content="https://www.theobeers.com/allsorts/og.jpg"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:title">',1),me=U('<h1 class="mb-4 text-3xl"></h1> <p class="mb-4"><em>Based on <a href="https://github.com/theodore-s-beers/feruca" rel="noreferrer" target="_blank" class="text-blue-800 hover:underline">feruca</a>, a simple but conformant & performant implementation of the <a href="https://www.unicode.org/reports/tr10/" rel="noreferrer" target="_blank" class="text-blue-800 hover:underline">Unicode Collation Algorithm</a>, written in safe Rust with minimal dependencies. Give it a try some time!</em></p> <div class="mb-4 flex gap-4"><textarea rows="20" placeholder="Enter items to be sorted here, one per line" class="grow rounded border bg-white p-2"></textarea> <textarea rows="20" readonly="" class="grow rounded border bg-white p-2"></textarea></div> <div class="flex items-center"><button class="mr-4 cursor-pointer rounded bg-blue-700 px-3 py-2 text-white">Sort</button> <button class="mr-4 cursor-pointer rounded bg-gray-600 px-3 py-2 text-white">Clear</button> <div class="mr-2">Sorting approach:</div> <select class="rounded border bg-white p-2"><option>Naïve</option><option selected>UCA default</option><option>Arabic first</option><option>Arabic interleaved</option></select> <button class="ml-auto cursor-pointer rounded bg-green-800 px-3 py-2 text-white">Copy</button></div>',1);function xe(e,t){ee(t,!0);let r=w(""),o=w(""),a=w("uca");const n=["uca","ArabicScript","ArabicInterleaved"],s="Text Sorting Playground";se(()=>{l(r,f(localStorage.getItem("allsorts-input")||"")),l(a,f(localStorage.getItem("allsorts-approach")||"uca"))});var i=me();ne(v=>{var j=pe();re.title=s;var L=c($(j),4);J(L,"content",s);var D=c(L,8);J(D,"content",s),O(v,j)});var _=$(i);_.textContent=s;var p=c(_,4),m=x(p);B(m);var E=c(m,2);B(E),S(p);var q=c(p,2),C=x(q);C.__click=[de,r,a,n,o];var P=c(C,2);P.__click=[_e,r,o];var b=c(P,4),g=x(b);g.value=(g.__value="naive")==null?"":"naive";var h=c(g);h.value=(h.__value="uca")==null?"":"uca";var y=c(h);y.value=(y.__value="ArabicScript")==null?"":"ArabicScript";var T=c(y);T.value=(T.__value="ArabicInterleaved")==null?"":"ArabicInterleaved",S(b),ae(2),S(q),N(m,()=>u(r),v=>l(r,v)),N(E,()=>u(o),v=>l(o,v)),ve(b,()=>u(a),v=>l(a,v)),O(e,i),te()}oe(["click"]);export{xe as component};
