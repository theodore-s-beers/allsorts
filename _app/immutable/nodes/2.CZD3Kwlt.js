import{t as R,b as $}from"../chunks/DdwVnD-3.js";import{p as P,g as W,k as Z,L as F,M as G,N as ee,t as te,a9 as re,I as ae,G as oe,F as X,q as ne,a6 as U,aa as I,X as d,a8 as c,z as u,u as ie,A as s,ab as le,Y as _}from"../chunks/BjfR8Wdb.js";import{d as se,c as ce}from"../chunks/ByqF8lCf.js";import{i as ue,b as ve,p as f}from"../chunks/D_X-tldp.js";import{o as fe}from"../chunks/0wB7q8xc.js";function V(e){P&&W(e)!==null&&Z(e)}let z=!1;function de(){z||(z=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var t;if(!e.defaultPrevented)for(const r of e.target.elements)(t=r.__on_r)==null||t.call(r)})},{capture:!0}))}function _e(e){var t=ee,r=te;F(null),G(null);try{return e()}finally{F(t),G(r)}}function Y(e,t,r,n=r){e.addEventListener(t,()=>_e(r));const a=e.__on_r;a?e.__on_r=()=>{a(),n(!0)}:e.__on_r=()=>n(!0),de()}function B(e,t,r,n){var a=e.__attributes??(e.__attributes={});P&&(a[t]=e.getAttribute(t)),a[t]!==(a[t]=r)&&e.setAttribute(t,r)}function J(e,t,r=t){var n=re();Y(e,"input",a=>{var o=a?e.defaultValue:e.value;if(o=E(e)?q(o):o,r(o),n&&o!==(o=t())){var v=e.selectionStart,i=e.selectionEnd;e.value=o??"",i!==null&&(e.selectionStart=v,e.selectionEnd=Math.min(i,e.value.length))}}),(P&&e.defaultValue!==e.value||ae(t)==null&&e.value)&&r(E(e)?q(e.value):e.value),oe(()=>{var a=t();E(e)&&a===q(e.value)||e.type==="date"&&!a&&!e.value||a!==e.value&&(e.value=a??"")})}function E(e){var t=e.type;return t==="number"||t==="range"}function q(e){return e===""?null:+e}function D(e,t,r){if(e.multiple)return be(e,t);for(var n of e.options){var a=p(n);if(ue(a,t)){n.selected=!0;return}}(!r||t!==void 0)&&(e.selectedIndex=-1)}function pe(e,t){X(()=>{var r=new MutationObserver(()=>{var n=e.__value;D(e,n)});return r.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{r.disconnect()}})}function me(e,t,r=t){var n=!0;Y(e,"change",a=>{var o=a?"[selected]":":checked",v;if(e.multiple)v=[].map.call(e.querySelectorAll(o),p);else{var i=e.querySelector(o)??e.querySelector("option:not([disabled])");v=i&&p(i)}r(v)}),X(()=>{var a=t();if(D(e,a,n),n&&a===void 0){var o=e.querySelector(":checked");o!==null&&(a=p(o),r(a))}e.__value=a,n=!1}),pe(e)}function be(e,t){for(var r of e.options)r.selected=~t.indexOf(p(r))}function p(e){return"__value"in e?e.__value:e.value}async function ge(e,t,r,n,a){s(t,f(u(t).trim().replace(/\n{2,}/g,`
`)));const o=u(t).split(`
`).map(i=>i.trim());if(s(t,f(o.join(`
`))),localStorage.setItem("allsorts-input",u(t)),localStorage.setItem("allsorts-approach",u(r)),u(r)==="naive"||!n.includes(u(r))){o.sort(),s(a,f(o.join(`
`)));return}s(a,"Sorting...");const v={items:o,tailoring:u(r)};try{const i=await fetch("https://feruca-api.fly.dev/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)});if(!i.ok)throw new Error(`Sorting API request failed: ${i.status}, ${i.statusText}`);const m=await i.json();s(a,f(m.join(`
`)))}catch(i){i instanceof Error?console.error(i.message):console.error(i),s(a,"An error occurred with the sorting API request. Please try again.")}}function he(e,t,r){s(t,""),s(r,""),localStorage.removeItem("allsorts-input")}var ye=R('<meta name="description" content="Try sorting text using different approaches—including mixing the Latin and Arabic scripts"> <meta property="og:type" content="website"> <meta property="og:title"> <meta property="og:url" content="https://www.theobeers.com/allsorts/"> <meta property="og:image" content="https://www.theobeers.com/allsorts/og.jpg"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:title">',1),we=R('<h1 class="mb-4 text-3xl"></h1> <p class="mb-4 hyphens-auto"><em>Based on <a href="https://github.com/theodore-s-beers/feruca" rel="noreferrer" target="_blank" class="text-blue-800 hover:underline">feruca</a>, a simple but conformant & performant implementation of the <a href="https://www.unicode.org/reports/tr10/" rel="noreferrer" target="_blank" class="text-blue-800 hover:underline">Unicode Collation Algorithm</a>, written in safe Rust with minimal dependencies. Give it a try some time!</em></p> <div class="mb-4 flex flex-col gap-4 md:flex-row"><textarea rows="16" placeholder="Enter items to be sorted here, one per line" class="grow rounded border bg-white p-2"></textarea> <textarea rows="16" readonly="" class="grow rounded border bg-white p-2"></textarea></div> <div class="flex flex-col gap-4 md:flex-row"><div class="flex gap-4"><button class="cursor-pointer rounded bg-blue-700 px-3 py-2 text-white">Sort</button> <button class="cursor-pointer rounded bg-gray-600 px-3 py-2 text-white">Clear</button></div> <div class="flex items-center gap-2"><label for="approach-select">Sorting approach:</label> <select id="approach-select" class="rounded border bg-white p-2"><option>Naïve</option><option selected>UCA default</option><option>Arabic first</option><option>Arabic interleaved</option></select></div> <button class="w-16 cursor-pointer rounded bg-green-800 py-2 text-white md:ml-auto">Copy</button></div>',1);function Ee(e,t){ne(t,!0);let r=I(""),n=I(""),a,o=I("uca");const v=["uca","ArabicScript","ArabicInterleaved"],i="Text Sorting Playground";async function m(){try{await navigator.clipboard.writeText(u(n)),a.focus()}catch(l){l instanceof Error?console.error(l.message):console.error(l)}}fe(()=>{s(r,f(localStorage.getItem("allsorts-input")||"")),s(o,f(localStorage.getItem("allsorts-approach")||"uca"))});var T=we();ce(l=>{var N=ye();le.title=i;var O=c(U(N),4);B(O,"content",i);var Q=c(O,8);B(Q,"content",i),$(l,N)});var j=U(T);j.textContent=i;var b=c(j,4),g=d(b);V(g);var h=c(g,2);V(h),ve(h,l=>a=l,()=>a),_(b);var C=c(b,2),y=d(C),L=d(y);L.__click=[ge,r,o,v,n];var H=c(L,2);H.__click=[he,r,n],_(y);var w=c(y,2),x=c(d(w),2),S=d(x);S.value=(S.__value="naive")==null?"":"naive";var A=c(S);A.value=(A.__value="uca")==null?"":"uca";var k=c(A);k.value=(k.__value="ArabicScript")==null?"":"ArabicScript";var M=c(k);M.value=(M.__value="ArabicInterleaved")==null?"":"ArabicInterleaved",_(x),_(w);var K=c(w,2);K.__click=m,_(C),J(g,()=>u(r),l=>s(r,l)),J(h,()=>u(n),l=>s(n,l)),me(x,()=>u(o),l=>s(o,l)),$(e,T),ie()}se(["click"]);export{Ee as component};
